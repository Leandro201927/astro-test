---
import "@/styles/index.scss";
import type { Page } from "@/types/clientWebsite";
import { flattenProps } from "@/utils/flattenProps";
import Layout from "@/components/system/Layout.astro";
import DynamicIsland from "@/components/system/DynamicIsland";
import globalComponentsDefault from "@/data/global.json";
const page: Page = {
  "id": "0d6903e0-569b-4830-9fa4-b5a6b92c6986",
  "slug": "nueva-pagina-1",
  "type": "landing-page",
  "title": "Nueva pÃ¡gina",
  "author": {
    "id": "",
    "url": "",
    "name": ""
  },
  "noindex": false,
  "sitemap": {
    "priority": 0.5,
    "changefreq": "monthly"
  },
  "language": "es",
  "nofollow": false,
  "canonical": null,
  "components": [
    {
      "name": "hero-1-horizontal",
      "custom_attrs": {
        "title": {
          "type": "string",
          "value": "Hero 1 Horizontal"
        },
        "description": {
          "type": "string",
          "value": "A hero section with a horizontal layout, featuring a title, description, and an optional left section component."
        },
        "color_background": {
          "type": "color",
          "value": "var(--color-background)"
        },
        "image_hero_right_href": {
          "type": "img",
          "value": "http://localhost:4000/api/cloudflare/r2/file/3a6e2a61-e3bb-419c-8729-0b20bcc2da4a?key=1764984578369_bastante-joven-haciendo-selfie-en-pared-blanca.jpg"
        },
        "hero_left_section_component": {
          "type": "component",
          "value": null
        }
      },
      "atomic_hierarchy": "template"
    },
    {
      "name": "hero-1-horizontal",
      "custom_attrs": {
        "title": {
          "type": "string",
          "value": "Hero 1 Horizontal"
        },
        "description": {
          "type": "string",
          "value": "A hero section with a horizontal layout, featuring a title, description, and an optional left section component."
        },
        "color_background": {
          "type": "color",
          "value": "var(--color-background)"
        },
        "image_hero_right_href": {
          "type": "img",
          "value": "http://localhost:4000/api/cloudflare/r2/file/3a6e2a61-e3bb-419c-8729-0b20bcc2da4a?key=1764983427033_592149572_122160469376667158_32108267051623983_n.jpg"
        },
        "hero_left_section_component": {
          "type": "component",
          "value": null
        }
      },
      "atomic_hierarchy": "template"
    },
    {
      "name": "hero-1-horizontal",
      "custom_attrs": {
        "title": {
          "type": "string",
          "value": "Hero 1 Horizontal"
        },
        "description": {
          "type": "string",
          "value": "A hero section with a horizontal layout, featuring a title, description, and an optional left section component."
        },
        "color_background": {
          "type": "color",
          "value": "var(--color-background)"
        },
        "image_hero_right_href": {
          "type": "img",
          "value": "http://localhost:4000/api/cloudflare/r2/file/3a6e2a61-e3bb-419c-8729-0b20bcc2da4a?key=1764982597446_592323049_122273975546240648_3617116708534990396_n.jpg"
        },
        "hero_left_section_component": {
          "type": "component",
          "value": null
        }
      },
      "atomic_hierarchy": "template"
    },
    {
      "name": "hero-1-horizontal",
      "custom_attrs": {
        "title": {
          "type": "string",
          "value": "Hero 1 Horizontal"
        },
        "description": {
          "type": "string",
          "value": "A hero section with a horizontal layout, featuring a title, description, and an optional left section component."
        },
        "color_background": {
          "type": "color",
          "value": "var(--color-background)"
        },
        "image_hero_right_href": {
          "type": "img",
          "value": "https://pub-2f0903fdce44479abbb91fa21368caec.r2.dev/1765228397760_leadev logo.png"
        },
        "hero_left_section_component": {
          "type": "component",
          "value": null
        }
      },
      "atomic_hierarchy": "template"
    },
    {
      "name": "hero-1-horizontal",
      "custom_attrs": {
        "title": {
          "type": "string",
          "value": "Hero 1 Horizontal"
        },
        "description": {
          "type": "string",
          "value": "A hero section with a horizontal layout, featuring a title, description, and an optional left section component."
        },
        "color_background": {
          "type": "color",
          "value": "var(--color-background)"
        },
        "image_hero_right_href": {
          "type": "img",
          "value": "http://localhost:4000/api/cloudflare/r2/file/3a6e2a61-e3bb-419c-8729-0b20bcc2da4a?key=1764983427033_592149572_122160469376667158_32108267051623983_n.jpg"
        },
        "hero_left_section_component": {
          "type": "component",
          "value": null
        }
      },
      "atomic_hierarchy": "template"
    }
  ],
  "meta_title": "",
  "open_graph": {
    "og_type": "website",
    "og_image": {
      "alt": "",
      "src": "",
      "width": 0,
      "height": 0,
      "srcset": [],
      "formats": [
        "webp"
      ]
    },
    "og_title": "",
    "twitter_card": "summary",
    "og_description": ""
  },
  "schema_org": {},
  "word_count": 0,
  "breadcrumbs": [],
  "modified_at": "2025-11-28T15:17:12.069Z",
  "published_at": "2025-11-28T15:17:12.068Z",
  "reading_time": 0,
  "robots_extra": "",
  "keyword_focus": [],
  "redirect_from": [],
  "featured_image": {
    "alt": "",
    "src": "",
    "width": 0,
    "height": 0,
    "srcset": [],
    "formats": [
      "webp"
    ]
  },
  "meta_description": "",
  "hreflang_alternates": [],
  "content_text_summary": ""
}
const globalComponents = globalComponentsDefault
const items = page.components.map((component) => {
  const dir = (component.atomic_hierarchy as string).endsWith('s') ? component.atomic_hierarchy : `${component.atomic_hierarchy}s`
  const componentPath = `${dir}/${component.name}`;
  const props = flattenProps(component.custom_attrs || {});
  return { componentPath, props };
})
---
<Layout page={page}>
	<>
		{/* Global Header */}
		{globalComponents?.header && (
			<div class="comp-wrap sticky-top" data-top-index="global_header">
				<DynamicIsland client:load componentPath={`${globalComponents.header.atomic_hierarchy}s/${globalComponents.header.name}`} props={flattenProps(globalComponents.header.custom_attrs || {})} />
			</div>
		)}
		{items.map(({ componentPath, props }) => (
			<DynamicIsland client:load componentPath={componentPath} props={props} />
		))}
		{/* Global Footer */}
		{globalComponents?.footer && (
			<div class="comp-wrap" data-top-index="global_footer">
				<DynamicIsland client:load componentPath={`${globalComponents.footer.atomic_hierarchy}s/${globalComponents.footer.name}`} props={flattenProps(globalComponents.footer.custom_attrs || {})} />
			</div>
		)}
	</>
</Layout>